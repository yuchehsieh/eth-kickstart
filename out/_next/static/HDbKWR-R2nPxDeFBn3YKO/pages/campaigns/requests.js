(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Mybo:function(e,t,a){"use strict";a.r(t);var r=a("o0o1"),n=a.n(r),s=a("1OyB"),c=a("vuIU"),l=a("Ji7U"),i=a("md7G"),o=a("foSv"),u=a("q1tI"),p=a.n(u),d=a("5Yp1"),b=a("pVnL"),f=a.n(b),h=(a("Wt1U"),a("3WF5")),v=a.n(h),O=a("TSYQ"),j=a.n(O),m=(a("17x9"),a("ZeOK")),g=a("ICNK"),w=a("Y53p"),y=a("H+2d");function R(e){var t=e.children,a=e.className,r=j()(a),n=Object(g.a)(R,e),s=Object(w.a)(R,e);return p.a.createElement(s,f()({},n,{className:r}),t)}R.handledProps=["as","children","className"],R.defaultProps={as:"tbody"},R.propTypes={};var N=R,P=a("MZgk"),A=a("D1pA");function C(e){var t=e.active,a=e.children,r=e.className,n=e.collapsing,s=e.content,c=e.disabled,l=e.error,i=e.icon,o=e.negative,u=e.positive,d=e.selectable,b=e.singleLine,h=e.textAlign,v=e.verticalAlign,O=e.warning,R=e.width,N=j()(Object(m.a)(t,"active"),Object(m.a)(n,"collapsing"),Object(m.a)(c,"disabled"),Object(m.a)(l,"error"),Object(m.a)(o,"negative"),Object(m.a)(u,"positive"),Object(m.a)(d,"selectable"),Object(m.a)(b,"single line"),Object(m.a)(O,"warning"),Object(m.d)(h),Object(m.f)(v),Object(m.g)(R,"wide"),r),P=Object(g.a)(C,e),x=Object(w.a)(C,e);return y.a.isNil(a)?p.a.createElement(x,f()({},P,{className:N}),A.a.create(i),s):p.a.createElement(x,f()({},P,{className:N}),a)}C.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],C.defaultProps={as:"td"},C.propTypes={},C.create=Object(P.e)(C,(function(e){return{content:e}}));var x=C;function k(e){var t=e.children,a=e.className,r=e.content,n=e.fullWidth,s=j()(Object(m.a)(n,"full-width"),a),c=Object(g.a)(k,e),l=Object(w.a)(k,e);return p.a.createElement(l,f()({},c,{className:s}),y.a.isNil(t)?r:t)}k.handledProps=["as","children","className","content","fullWidth"],k.defaultProps={as:"thead"},k.propTypes={};var q=k;function E(e){var t=e.as,a=Object(g.a)(E,e);return p.a.createElement(q,f()({},a,{as:t}))}E.handledProps=["as"],E.propTypes={},E.defaultProps={as:"tfoot"};var T=E;function B(e){var t=e.as,a=e.className,r=e.sorted,n=j()(Object(m.e)(r,"sorted"),a),s=Object(g.a)(B,e);return p.a.createElement(x,f()({},s,{as:t,className:n}))}B.handledProps=["as","className","sorted"],B.propTypes={},B.defaultProps={as:"th"};var D=B;function z(e){var t=e.active,a=e.cellAs,r=e.cells,n=e.children,s=e.className,c=e.disabled,l=e.error,i=e.negative,o=e.positive,u=e.textAlign,d=e.verticalAlign,b=e.warning,h=j()(Object(m.a)(t,"active"),Object(m.a)(c,"disabled"),Object(m.a)(l,"error"),Object(m.a)(i,"negative"),Object(m.a)(o,"positive"),Object(m.a)(b,"warning"),Object(m.d)(u),Object(m.f)(d),s),O=Object(g.a)(z,e),R=Object(w.a)(z,e);return y.a.isNil(n)?p.a.createElement(R,f()({},O,{className:h}),v()(r,(function(e){return x.create(e,{defaultProps:{as:a}})}))):p.a.createElement(R,f()({},O,{className:h}),n)}z.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],z.defaultProps={as:"tr",cellAs:"td"},z.propTypes={},z.create=Object(P.e)(z,(function(e){return{cells:e}}));var F=z;function L(e){var t=e.attached,a=e.basic,r=e.celled,n=e.children,s=e.className,c=e.collapsing,l=e.color,i=e.columns,o=e.compact,u=e.definition,d=e.fixed,b=e.footerRow,h=e.headerRow,O=e.headerRows,R=e.inverted,P=e.padded,A=e.renderBodyRow,C=e.selectable,x=e.singleLine,k=e.size,E=e.sortable,B=e.stackable,D=e.striped,z=e.structured,H=e.tableData,I=e.textAlign,S=e.unstackable,_=e.verticalAlign,U=j()("ui",l,k,Object(m.a)(r,"celled"),Object(m.a)(c,"collapsing"),Object(m.a)(u,"definition"),Object(m.a)(d,"fixed"),Object(m.a)(R,"inverted"),Object(m.a)(C,"selectable"),Object(m.a)(x,"single line"),Object(m.a)(E,"sortable"),Object(m.a)(B,"stackable"),Object(m.a)(D,"striped"),Object(m.a)(z,"structured"),Object(m.a)(S,"unstackable"),Object(m.b)(t,"attached"),Object(m.b)(a,"basic"),Object(m.b)(o,"compact"),Object(m.b)(P,"padded"),Object(m.d)(I),Object(m.f)(_),Object(m.g)(i,"column"),"table",s),W=Object(g.a)(L,e),J=Object(w.a)(L,e);if(!y.a.isNil(n))return p.a.createElement(J,f()({},W,{className:U}),n);var Y={defaultProps:{cellAs:"th"}},M=(h||O)&&p.a.createElement(q,null,F.create(h,Y),v()(O,(function(e){return F.create(e,Y)})));return p.a.createElement(J,f()({},W,{className:U}),M,p.a.createElement(N,null,A&&v()(H,(function(e,t){return F.create(A(e,t))}))),b&&p.a.createElement(T,null,F.create(b)))}L.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],L.defaultProps={as:"table"},L.propTypes={},L.Body=N,L.Cell=x,L.Footer=T,L.Header=q,L.HeaderCell=D,L.Row=F;var H=L,I=a("QetY"),S=a("8cHP"),_=a("VC3L"),U=a("JX7q"),W=a("rePB"),J=a("oZBQ"),Y=p.a.createElement;function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Q=function(e){Object(l.a)(r,e);var t,a=(t=r,function(){var e,a=Object(o.a)(t);if(M()){var r=Object(o.a)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Object(i.a)(this,e)});function r(){var e;Object(s.a)(this,r);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return e=a.call.apply(a,[this].concat(n)),Object(W.a)(Object(U.a)(e),"state",{loading:!1}),e}return Object(c.a)(r,[{key:"onApprove",value:function(){var e,t;return n.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return this.setState({loading:!0}),e=Object(_.a)(this.props.address),a.next=4,n.a.awrap(J.a.eth.getAccounts());case 4:return t=a.sent,a.prev=5,a.next=8,n.a.awrap(e.methods.approveRequest(this.props.id).send({from:t[0]}));case 8:S.Router.replaceRoute("/campaigns/".concat(this.props.address,"/requests")),a.next=13;break;case 11:a.prev=11,a.t0=a.catch(5);case 13:this.setState({loading:!1});case 14:case"end":return a.stop()}}),null,this,[[5,11]],Promise)}},{key:"onFinalize",value:function(){var e,t;return n.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=Object(_.a)(this.props.address),a.next=3,n.a.awrap(J.a.eth.getAccounts());case 3:return t=a.sent,a.prev=4,a.next=7,n.a.awrap(e.methods.finalizeRequest(this.props.id).send({from:t[0]}));case 7:a.next=11;break;case 9:a.prev=9,a.t0=a.catch(4);case 11:case"end":return a.stop()}}),null,this,[[4,9]],Promise)}},{key:"render",value:function(){console.log(this.props.request);var e=this.props.request,t=e.description,a=e.value,r=e.recipient,n=e.complete,s=e.approvalCount,c=s>this.props.approversCount/2;return Y(H.Row,{disabled:n,positive:c&&!n},Y(H.Cell,null,this.props.id),Y(H.Cell,null,t),Y(H.Cell,null,J.a.utils.fromWei(a,"ether")),Y(H.Cell,null,r),Y(H.Cell,null,s,"/",this.props.approversCount),Y(H.Cell,null,!n&&Y(I.a,{color:"green",basic:!0,onClick:this.onApprove.bind(this),loading:this.state.loading},"Approve")),Y(H.Cell,null,!n&&Y(I.a,{color:"teal",basic:!0,onClick:this.onFinalize.bind(this),loading:this.state.loading},"Finalize")))}}]),r}(u.Component),X=p.a.createElement;function Z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var K=function(e){Object(l.a)(r,e);var t,a=(t=r,function(){var e,a=Object(o.a)(t);if(Z()){var r=Object(o.a)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Object(i.a)(this,e)});function r(){return Object(s.a)(this,r),a.apply(this,arguments)}return Object(c.a)(r,[{key:"renderRow",value:function(){var e=this;if(this.props.hasOwnProperty("requests"))return this.props.requests.map((function(t,a){return X(Q,{request:t,key:a,address:e.props.address,id:a,approversCount:e.props.approversCount})}))}},{key:"render",value:function(){var e=H.Header,t=H.HeaderCell,a=H.Row,r=H.Body;return X(d.a,null,X("h3",null,"Requests"),X(S.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new")},X("a",null,X(I.a,{primary:!0,icon:"add circle",content:"New Request"}))),X(H,null,X(e,null,X(a,null,X(t,null,"ID"),X(t,null,"Description"),X(t,null,"Amount"),X(t,null,"Recipient"),X(t,null,"Approval Count"),X(t,null,"Approve"),X(t,null,"Finalize"))),X(r,null,this.renderRow())),X("p",null,"Found ",this.props.requestCounts," Requests."))}}],[{key:"getInitialProps",value:function(e){var t,a,r,s,c;return n.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.query.hasOwnProperty("address")){l.next=3;break}return l.abrupt("return",{});case 3:return a=Object(_.a)(t),l.next=6,n.a.awrap(a.methods.getRequestCount().call());case 6:return r=l.sent,l.next=9,n.a.awrap(a.methods.approversCount().call());case 9:return s=l.sent,l.next=12,n.a.awrap(Promise.all(Array(parseInt(r)).fill().map((function(e,t){return a.methods.requests(t).call()}))));case 12:return c=l.sent,l.abrupt("return",{address:t,requests:c,requestCounts:r,approversCount:s});case 14:case"end":return l.stop()}}),null,null,null,Promise)}}]),r}(u.Component);t.default=K},aBwU:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return a("Mybo")}])}},[["aBwU",0,2,1,3,5]]]);